<mvc:View
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core"
  controllerName="sap_ui5.controller.Object">

  <Page showHeader="false" busy="{state>/isBusy}" class="pageTransparent">
    <VBox class="appContent">

      <MessageStrip text="{i18n>lockKilledMessage}"
                    type="Warning"
                    showIcon="true"
                    visible="{state>/isKilled}"
                    class="sapUiTinyMarginBottom"/>

      <HBox class="glassCard" alignItems="Center" justifyContent="SpaceBetween">
        <Title text="{= ${data>/object/root/id} || ${i18n>newChecklist} }"/>
        <Switch state="{= ${state>/mode} === 'EDIT' }"
                change=".onToggleEdit"/>
      </HBox>

      <HBox class="sapUiTinyMarginBottom" justifyContent="End">
        <Button text="{i18n>objectSave}"
                type="Emphasized"
                press=".onSave"
                visible="{= ${state>/mode}==='EDIT'}"
                class="sapUiTinyMarginEnd"/>
        <Button text="{i18n>objectCancel}" press=".onCancel"/>
      </HBox>

      <VBox class="glassCard">
        <Label text="{i18n>dateLabel}"/>
        <DatePicker value="{data>/object/basic/date}"
                    editable="{= ${state>/mode}==='EDIT'}"/>

        <Label text="{i18n>timezoneLabel}" class="sapUiSmallMarginTop"/>
        <Select items="{masterData>/timezones}"
                selectedKey="{data>/object/basic/timezone}"
                enabled="{= ${state>/mode}==='EDIT'}">
          <core:Item key="{masterData>key}" text="{masterData>text}"/>
        </Select>
      </VBox>

      <VBox class="glassCard">
        <Toolbar class="toolbarTransparent">
          <Title text="{i18n>checksTitle}"/>
          <ToolbarSpacer/>
          <Button text="{i18n>addRow}"
                  press=".onAddCheckRow"
                  visible="{= ${state>/mode}==='EDIT'}"/>
        </Toolbar>

        <Table items="{data>/object/checks}" class="flatEditorTable">
          <columns>
            <Column width="3rem"><Text text=""/></Column>
            <Column><Text text="{i18n>noLabel}"/></Column>
            <Column><Text text="{i18n>textLabel}"/></Column>
            <Column><Text text="{i18n>resultLabel}"/></Column>
            <Column width="2.5rem" visible="{= ${state>/mode}==='EDIT'}"><Text text=""/></Column>
          </columns>

          <items>
            <ColumnListItem>
              <cells>
                <CheckBox selected="{data>selected}" select=".onSelectionToggle" visible="{= ${state>/mode}==='EDIT'}"/>
                <Input value="{data>no}" editable="{= ${state>/mode}==='EDIT'}" width="5rem"/>
                <Input value="{data>text}" editable="{= ${state>/mode}==='EDIT'}"/>
                <Switch state="{data>result}"
                        enabled="{= ${state>/mode}==='EDIT'}"/>
                <Button icon="sap-icon://delete" type="Transparent" press=".onDeleteCheckRow" visible="{= ${state>/mode}==='EDIT'}"/>
              </cells>
            </ColumnListItem>
          </items>
        </Table>
      </VBox>

      <VBox class="glassCard">
        <Toolbar class="toolbarTransparent">
          <Title text="{i18n>barriersTitle}"/>
          <ToolbarSpacer/>
          <Button text="{i18n>addRow}"
                  press=".onAddBarrierRow"
                  visible="{= ${state>/mode}==='EDIT'}"/>
        </Toolbar>

        <Table items="{data>/object/barriers}" class="flatEditorTable">
          <columns>
            <Column width="3rem"><Text text=""/></Column>
            <Column><Text text="{i18n>noLabel}"/></Column>
            <Column><Text text="{i18n>textLabel}"/></Column>
            <Column><Text text="{i18n>resultLabel}"/></Column>
            <Column width="2.5rem" visible="{= ${state>/mode}==='EDIT'}"><Text text=""/></Column>
          </columns>

          <items>
            <ColumnListItem>
              <cells>
                <CheckBox selected="{data>selected}" select=".onSelectionToggle" visible="{= ${state>/mode}==='EDIT'}"/>
                <Input value="{data>no}" editable="{= ${state>/mode}==='EDIT'}" width="5rem"/>
                <Input value="{data>text}" editable="{= ${state>/mode}==='EDIT'}"/>
                <Switch state="{data>result}"
                        enabled="{= ${state>/mode}==='EDIT'}"/>
                <Button icon="sap-icon://delete" type="Transparent" press=".onDeleteBarrierRow" visible="{= ${state>/mode}==='EDIT'}"/>
              </cells>
            </ColumnListItem>
          </items>
        </Table>
      </VBox>

    </VBox>
  </Page>
</mvc:View>
