<mvc:View
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core"
  controllerName="sap_ui5.controller.Object">

  <Page showHeader="false" busy="{state>/isBusy}" class="pageTransparent">
    <VBox class="appContent">

      <HBox class="glassCard" alignItems="Center" justifyContent="SpaceBetween">
        <Title text="{= ${data>/object/root/id} || 'New checklist' }"/>
        <Switch state="{= ${state>/mode} === 'EDIT' }"
                change=".onToggleEdit"/>
      </HBox>

      <HBox class="sapUiTinyMarginBottom" justifyContent="End">
        <Button text="{i18n>objectSave}"
                type="Emphasized"
                press=".onSave"
                visible="{= ${state>/mode}==='EDIT'}"
                class="sapUiTinyMarginEnd"/>
        <Button text="{i18n>objectCancel}" press=".onCancel"/>
      </HBox>

      <VBox class="glassCard">
        <Label text="Date"/>
        <DatePicker value="{data>/object/basic/date}"
                    editable="{= ${state>/mode}==='EDIT'}"/>

        <Label text="Timezone" class="sapUiSmallMarginTop"/>
        <Select items="{ref>/timezones}"
                selectedKey="{data>/object/basic/timezone}"
                enabled="{= ${state>/mode}==='EDIT'}">
          <core:Item key="{ref>key}" text="{ref>text}"/>
        </Select>
      </VBox>

      <VBox class="glassCard">
        <Toolbar class="toolbarTransparent">
          <Title text="Checks"/>
          <ToolbarSpacer/>
          <Button text="Add row"
                  press=".onAddCheckRow"
                  visible="{= ${state>/mode}==='EDIT'}"/>
        </Toolbar>

        <Table items="{data>/object/checks}" class="glassTable">
          <columns>
            <Column><Text text="No"/></Column>
            <Column><Text text="Text"/></Column>
            <Column><Text text="Result"/></Column>
          </columns>

          <items>
            <ColumnListItem>
              <cells>
                <Input value="{data>no}" editable="{= ${state>/mode}==='EDIT'}" width="5rem"/>
                <Input value="{data>text}" editable="{= ${state>/mode}==='EDIT'}"/>
                <Switch state="{data>result}"
                        enabled="{= ${state>/mode}==='EDIT'}"/>
              </cells>
            </ColumnListItem>
          </items>
        </Table>
      </VBox>

      <VBox class="glassCard">
        <Toolbar class="toolbarTransparent">
          <Title text="Barriers"/>
          <ToolbarSpacer/>
          <Button text="Add row"
                  press=".onAddBarrierRow"
                  visible="{= ${state>/mode}==='EDIT'}"/>
        </Toolbar>

        <Table items="{data>/object/barriers}" class="glassTable">
          <columns>
            <Column><Text text="No"/></Column>
            <Column><Text text="Text"/></Column>
            <Column><Text text="Result"/></Column>
          </columns>

          <items>
            <ColumnListItem>
              <cells>
                <Input value="{data>no}" editable="{= ${state>/mode}==='EDIT'}" width="5rem"/>
                <Input value="{data>text}" editable="{= ${state>/mode}==='EDIT'}"/>
                <Switch state="{data>result}"
                        enabled="{= ${state>/mode}==='EDIT'}"/>
              </cells>
            </ColumnListItem>
          </items>
        </Table>
      </VBox>

    </VBox>
  </Page>
</mvc:View>
