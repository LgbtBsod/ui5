<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Quartz Enterprise â€“ Browse Orders</title>

<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;0,600;1,300&display=swap" rel="stylesheet">

<script
  id="sap-ui-bootstrap"
  src="https://ui5.sap.com/1.71.70/resources/sap-ui-core.js"
  data-sap-ui-theme="sap_fiori_3"
  data-sap-ui-libs="sap.m,sap.ui.layout,sap.ui.comp"
  data-sap-ui-compatVersion="edge">
</script>

<style>
/* ===== RESET & VARS ===== */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --accent: #6C63FF;
  --accent2: #FF6B9D;
  --accent3: #00D9B8;
  --bg: #08090d;
  --bg2: #0e1017;
  --surface: rgba(255,255,255,0.04);
  --surface2: rgba(255,255,255,0.07);
  --border: rgba(255,255,255,0.08);
  --border-bright: rgba(255,255,255,0.15);
  --text: #f0f1f5;
  --text-sub: rgba(240,241,245,0.45);
  --text-muted: rgba(240,241,245,0.25);
  --success: #00D9B8;
  --warning: #FFB547;
  --danger: #FF6B9D;
  --radius-xl: 28px;
  --radius-lg: 20px;
  --radius-md: 14px;
  --radius-sm: 10px;
  --shadow-glow: 0 0 60px rgba(108,99,255,0.15);
  --shadow-card: 0 24px 80px rgba(0,0,0,0.5);
  --transition: cubic-bezier(0.4,0,0.2,1);
}

.light {
  --bg: #f0f2f8;
  --bg2: #e6e9f2;
  --surface: rgba(255,255,255,0.7);
  --surface2: rgba(255,255,255,0.85);
  --border: rgba(0,0,0,0.07);
  --border-bright: rgba(0,0,0,0.12);
  --text: #0e1017;
  --text-sub: rgba(14,16,23,0.5);
  --text-muted: rgba(14,16,23,0.3);
  --shadow-glow: 0 0 60px rgba(108,99,255,0.1);
  --shadow-card: 0 24px 80px rgba(0,0,0,0.08);
}

/* ===== FONT OVERRIDES ===== */
body, .sapUiBody, .sapMText, .sapMLabel, .sapMTitle, .sapMStdListItem,
.sapMColumnListItem, .sapMBtnContent, .sapMInputBaseInner,
.sapMSFI, .sapSelectListItem, .sapMCbLabel {
  font-family: 'DM Sans', sans-serif !important;
}

/* ===== ROOT ===== */
body, .sapUiBody { overflow: hidden; background: var(--bg); color: var(--text); }

.appRoot {
  width: 100vw; height: 100vh;
  background: var(--bg);
  transition: background 0.6s var(--transition);
  position: relative;
  overflow: hidden;
}

/* Ambient glow blobs */
.appRoot::before, .appRoot::after {
  content: ''; position: fixed; border-radius: 50%; pointer-events: none;
  transition: opacity 0.8s var(--transition);
}
.appRoot::before {
  width: 700px; height: 700px;
  top: -200px; left: -150px;
  background: radial-gradient(circle, rgba(108,99,255,0.12) 0%, transparent 70%);
  animation: blobDrift1 18s ease-in-out infinite alternate;
}
.appRoot::after {
  width: 500px; height: 500px;
  bottom: -100px; right: -100px;
  background: radial-gradient(circle, rgba(0,217,184,0.08) 0%, transparent 70%);
  animation: blobDrift2 22s ease-in-out infinite alternate;
}
@keyframes blobDrift1 { from { transform: translate(0,0) scale(1); } to { transform: translate(60px,40px) scale(1.1); } }
@keyframes blobDrift2 { from { transform: translate(0,0) scale(1); } to { transform: translate(-40px,-30px) scale(1.08); } }

/* Noise overlay */
.appRoot .noise {
  position: fixed; inset: 0; pointer-events: none; z-index: 0; opacity: 0.025;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  background-size: 128px;
}

/* ===== LAYOUT ===== */
.layoutWrapper {
  display: flex; width: 100vw; height: 100vh;
  padding: 20px; gap: 20px;
  position: relative; z-index: 1;
}

/* ===== GLASS CARD ===== */
.glassCard {
  background: var(--surface);
  backdrop-filter: blur(32px) saturate(180%);
  -webkit-backdrop-filter: blur(32px) saturate(180%);
  border: 1px solid var(--border);
  border-radius: var(--radius-xl);
  display: flex !important; flex-direction: column;
  height: 100%; overflow: hidden;
  box-shadow: var(--shadow-card);
  transition: box-shadow 0.4s var(--transition), border-color 0.4s var(--transition);
  position: relative;
}
.glassCard:hover { border-color: var(--border-bright); }

/* Top edge highlight */
.glassCard::before {
  content: '';
  position: absolute; top: 0; left: 10%; right: 10%; height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  border-radius: 50%;
}

/* ===== MASTER PANEL ===== */
.masterPanel {
  width: 360px; min-width: 360px;
  transition: all 0.7s var(--transition);
}
.masterPanel.splitMode { width: 340px; min-width: 340px; }

/* ===== DETAIL PANEL ===== */
.detailPanel {
  flex: 1; min-width: 0;
  animation: slideInDetail 0.6s var(--transition) both;
}
@keyframes slideInDetail {
  from { opacity: 0; transform: translateX(32px) scale(0.97); }
  to   { opacity: 1; transform: translateX(0)   scale(1); }
}

/* ===== PANEL HEADER ===== */
.panelHeader {
  padding: 28px 28px 20px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.panelLabel {
  font-family: 'Syne', sans-serif !important;
  font-size: 11px; font-weight: 700;
  letter-spacing: 0.2em; text-transform: uppercase;
  color: var(--accent); margin-bottom: 6px;
}
.panelTitle {
  font-family: 'Syne', sans-serif !important;
  font-size: 22px; font-weight: 800;
  color: var(--text); line-height: 1.15;
}
.panelSub { font-size: 13px; color: var(--text-sub); margin-top: 3px; }

/* ===== SEARCH BAR ===== */
.searchWrap {
  padding: 16px 28px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.searchWrap .sapMSF {
  border-radius: var(--radius-md) !important;
  background: var(--surface2) !important;
  border: 1px solid var(--border) !important;
  box-shadow: none !important;
  transition: border-color 0.3s, box-shadow 0.3s;
}
.searchWrap .sapMSF:focus-within {
  border-color: var(--accent) !important;
  box-shadow: 0 0 0 3px rgba(108,99,255,0.15) !important;
}
.searchWrap .sapMSFI { color: var(--text) !important; padding: 10px 14px !important; }
.searchWrap .sapMSF .sapMSFSearchIcon { color: var(--text-sub) !important; }

/* ===== SCROLL CONTENT ===== */
.scrollContent {
  flex: 1; overflow-y: auto; overflow-x: hidden;
  padding: 16px 20px;
}
.scrollContent::-webkit-scrollbar { width: 4px; }
.scrollContent::-webkit-scrollbar-track { background: transparent; }
.scrollContent::-webkit-scrollbar-thumb { background: var(--border-bright); border-radius: 10px; }

/* ===== ORDER LIST ITEMS ===== */
.sapMListTblRow, .sapMSLI, .sapMLIB {
  background: transparent !important;
  border: none !important;
}

.orderItem {
  display: flex; align-items: center; gap: 14px;
  padding: 14px 16px;
  border-radius: var(--radius-md);
  cursor: pointer; position: relative;
  transition: background 0.25s, transform 0.25s var(--transition), box-shadow 0.25s;
  border: 1px solid transparent;
  margin-bottom: 6px;
  user-select: none;
}
.orderItem::before {
  content: ''; position: absolute; left: 0; top: 20%; bottom: 20%;
  width: 3px; border-radius: 4px;
  background: var(--accent);
  opacity: 0; transform: scaleY(0.4);
  transition: opacity 0.3s, transform 0.3s var(--transition);
}
.orderItem:hover {
  background: var(--surface2);
  border-color: var(--border);
  transform: translateX(4px);
  box-shadow: 0 4px 24px rgba(0,0,0,0.2);
}
.orderItem:hover::before { opacity: 1; transform: scaleY(1); }
.orderItem.active {
  background: rgba(108,99,255,0.12);
  border-color: rgba(108,99,255,0.25);
  transform: translateX(6px);
}
.orderItem.active::before { opacity: 1; transform: scaleY(1); background: var(--accent); }

.orderAvatar {
  width: 42px; height: 42px; border-radius: 13px;
  display: flex; align-items: center; justify-content: center;
  font-family: 'Syne', sans-serif; font-weight: 800; font-size: 15px;
  flex-shrink: 0; letter-spacing: -0.02em;
}
.orderInfo { flex: 1; min-width: 0; }
.orderName {
  font-size: 14px; font-weight: 600; color: var(--text);
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  line-height: 1.3;
}
.orderId { font-size: 11px; color: var(--text-sub); margin-top: 2px; }
.orderBadge {
  flex-shrink: 0; font-size: 10px; font-weight: 700;
  letter-spacing: 0.08em; text-transform: uppercase;
  padding: 4px 10px; border-radius: 20px;
}
.badge-active { background: rgba(0,217,184,0.15); color: var(--success); border: 1px solid rgba(0,217,184,0.2); }
.badge-pending { background: rgba(255,181,71,0.15); color: var(--warning); border: 1px solid rgba(255,181,71,0.2); }
.badge-completed { background: rgba(108,99,255,0.15); color: var(--accent); border: 1px solid rgba(108,99,255,0.2); }

/* ===== DETAIL HEADER ===== */
.detailHero {
  padding: 32px 32px 24px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.detailBack {
  display: inline-flex; align-items: center; gap: 6px;
  font-size: 12px; font-weight: 600; color: var(--text-sub);
  cursor: pointer; margin-bottom: 20px;
  padding: 6px 12px 6px 8px; border-radius: 20px;
  background: var(--surface2); border: 1px solid var(--border);
  transition: color 0.2s, border-color 0.2s;
  user-select: none;
}
.detailBack:hover { color: var(--text); border-color: var(--border-bright); }
.detailBack svg { opacity: 0.6; }

.detailCustomer {
  font-family: 'Syne', sans-serif;
  font-size: 28px; font-weight: 800;
  color: var(--text); line-height: 1.1;
  margin-bottom: 6px;
}
.detailMeta {
  display: flex; align-items: center; gap: 16px;
  font-size: 13px; color: var(--text-sub);
}
.detailMeta .dot { width: 4px; height: 4px; border-radius: 50%; background: var(--text-muted); }

/* ===== KPI GRID ===== */
.kpiGrid {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 14px;
  padding: 20px 32px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.kpiCard {
  padding: 18px 20px; border-radius: var(--radius-lg);
  background: var(--surface2); border: 1px solid var(--border);
  position: relative; overflow: hidden;
  transition: transform 0.3s var(--transition), box-shadow 0.3s;
}
.kpiCard:hover { transform: translateY(-3px); box-shadow: 0 12px 40px rgba(0,0,0,0.25); }
.kpiCard::after {
  content: ''; position: absolute;
  top: -20px; right: -20px; width: 70px; height: 70px;
  border-radius: 50%; opacity: 0.12;
}
.kpiCard:nth-child(1)::after { background: var(--accent); }
.kpiCard:nth-child(2)::after { background: var(--accent3); }
.kpiCard:nth-child(3)::after { background: var(--accent2); }

.kpiLabel { font-size: 11px; font-weight: 600; letter-spacing: 0.12em; text-transform: uppercase; color: var(--text-sub); margin-bottom: 8px; }
.kpiVal {
  font-family: 'Syne', sans-serif;
  font-size: 26px; font-weight: 800;
  color: var(--text); line-height: 1;
}
.kpiChange { font-size: 11px; margin-top: 6px; color: var(--text-sub); }
.kpiChange.up { color: var(--success); }
.kpiChange.down { color: var(--danger); }

/* ===== TABLE (RESOURCES) ===== */
.resTable {
  width: 100%; border-collapse: collapse;
}
.resTable thead th {
  padding: 0 16px 12px;
  font-size: 11px; font-weight: 700; letter-spacing: 0.12em; text-transform: uppercase;
  color: var(--text-muted); text-align: left;
}
.resRow {
  background: var(--surface2);
  border-radius: var(--radius-md);
  margin-bottom: 8px;
  transition: all 0.25s var(--transition);
  cursor: default;
}
.resRow:hover { background: rgba(255,255,255,0.08); transform: translateX(4px); }
.resRow td { padding: 15px 16px; }
.resRow td:first-child { border-radius: var(--radius-md) 0 0 var(--radius-md); }
.resRow td:last-child { border-radius: 0 var(--radius-md) var(--radius-md) 0; }

.resName { font-size: 14px; font-weight: 500; color: var(--text); }
.resSpec { font-size: 12px; color: var(--text-sub); margin-top: 2px; }
.resAlloc { font-family: 'Syne', sans-serif; font-size: 14px; font-weight: 700; color: var(--text); }

.statusPill {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 5px 12px; border-radius: 20px; font-size: 11px; font-weight: 700;
  letter-spacing: 0.06em; text-transform: uppercase;
}
.statusPill .dot { width: 6px; height: 6px; border-radius: 50%; }
.status-success { background: rgba(0,217,184,0.12); color: var(--success); }
.status-success .dot { background: var(--success); animation: pulse 2s infinite; }
.status-warning { background: rgba(255,181,71,0.12); color: var(--warning); }
.status-warning .dot { background: var(--warning); }
.status-error { background: rgba(255,107,157,0.12); color: var(--danger); }
.status-error .dot { background: var(--danger); }
@keyframes pulse { 0%,100% { box-shadow: 0 0 0 0 rgba(0,217,184,0.5); } 50% { box-shadow: 0 0 0 5px rgba(0,217,184,0); } }

/* ===== SECTION TITLE ===== */
.sectionTitle {
  font-family: 'Syne', sans-serif !important;
  font-size: 13px; font-weight: 700;
  letter-spacing: 0.15em; text-transform: uppercase;
  color: var(--text-sub); margin-bottom: 14px;
}

/* ===== ACTION BAR ===== */
.actionBar {
  display: flex; gap: 12px; align-items: center;
  padding: 20px 32px;
  border-top: 1px solid var(--border);
  flex-shrink: 0; margin-top: auto;
}
.btnPrimary {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 0 26px; height: 44px;
  border-radius: 50px; border: none; cursor: pointer;
  font-family: 'DM Sans', sans-serif; font-size: 14px; font-weight: 600;
  background: linear-gradient(135deg, var(--accent), #8B84FF);
  color: #fff; letter-spacing: 0.01em;
  box-shadow: 0 8px 30px rgba(108,99,255,0.35);
  transition: all 0.3s var(--transition);
  white-space: nowrap;
}
.btnPrimary:hover { transform: translateY(-2px) scale(1.02); box-shadow: 0 14px 40px rgba(108,99,255,0.5); }
.btnPrimary:active { transform: translateY(0) scale(0.98); }
.btnPrimary.loading { opacity: 0.75; pointer-events: none; }
.btnPrimary.done { background: linear-gradient(135deg, var(--success), #00B8A0) !important; box-shadow: 0 8px 30px rgba(0,217,184,0.35) !important; }

.btnGhost {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 0 20px; height: 44px;
  border-radius: 50px; cursor: pointer;
  font-family: 'DM Sans', sans-serif; font-size: 14px; font-weight: 500;
  background: var(--surface2); border: 1px solid var(--border);
  color: var(--text-sub); transition: all 0.3s var(--transition);
}
.btnGhost:hover { border-color: var(--border-bright); color: var(--text); background: rgba(255,255,255,0.08); }

/* ===== THEME TOGGLE ===== */
.themeToggle {
  position: fixed; top: 24px; right: 28px; z-index: 100;
  width: 44px; height: 44px; border-radius: 50%; border: 1px solid var(--border);
  background: var(--surface2); cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  backdrop-filter: blur(16px); transition: all 0.3s var(--transition);
  box-shadow: 0 4px 20px rgba(0,0,0,0.2);
}
.themeToggle:hover { border-color: var(--border-bright); transform: rotate(20deg) scale(1.05); }
.themeToggle svg { transition: transform 0.4s; }

/* ===== EMPTY STATE ===== */
.emptyState {
  flex: 1; display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  gap: 12px; padding: 40px;
}
.emptyIcon { font-size: 48px; opacity: 0.15; }
.emptyTitle { font-family: 'Syne', sans-serif; font-size: 18px; font-weight: 700; color: var(--text-sub); }
.emptyText { font-size: 13px; color: var(--text-muted); text-align: center; max-width: 220px; }

/* ===== LOADER SPINNER ===== */
@keyframes spin { to { transform: rotate(360deg); } }
.spinner { width: 18px; height: 18px; border: 2px solid rgba(255,255,255,0.3); border-top-color: #fff; border-radius: 50%; animation: spin 0.7s linear infinite; }

/* ===== LIGHT THEME OVERRIDES ===== */
.light .appRoot::before { background: radial-gradient(circle, rgba(108,99,255,0.08) 0%, transparent 70%); }
.light .glassCard { background: rgba(255,255,255,0.65); border-color: rgba(0,0,0,0.07); box-shadow: 0 24px 80px rgba(0,0,0,0.07); }
.light .glassCard::before { background: linear-gradient(90deg, transparent, rgba(255,255,255,0.9), transparent); }
.light .kpiCard { background: rgba(255,255,255,0.8); }
.light .resRow { background: rgba(255,255,255,0.7); }
.light .resRow:hover { background: rgba(255,255,255,0.95); }
.light .orderItem:hover { background: rgba(255,255,255,0.8); }
.light .orderItem.active { background: rgba(108,99,255,0.08); }
.light .btnGhost { background: rgba(0,0,0,0.04); }
.light .btnGhost:hover { background: rgba(0,0,0,0.07); }
.light .themeToggle { background: rgba(255,255,255,0.8); }
.light .searchWrap .sapMSF { background: rgba(255,255,255,0.7) !important; }

/* ===== REVEAL ANIMATION FOR STAGGER ===== */
.reveal { animation: revealUp 0.5s var(--transition) both; }
@keyframes revealUp {
  from { opacity: 0; transform: translateY(16px); }
  to   { opacity: 1; transform: translateY(0); }
}
.reveal:nth-child(1) { animation-delay: 0.05s; }
.reveal:nth-child(2) { animation-delay: 0.1s; }
.reveal:nth-child(3) { animation-delay: 0.15s; }
.reveal:nth-child(4) { animation-delay: 0.2s; }
.reveal:nth-child(5) { animation-delay: 0.25s; }

/* ===== SECTION DIVIDER ===== */
.divider { height: 1px; background: var(--border); margin: 4px 0 20px; }

/* ===== APP WRAPPER (DOM) ===== */
#appWrapper { position: fixed; inset: 0; }
</style>
</head>
<body class="sapUiBody" id="content">
<div id="appWrapper" class="dark">
  <div class="appRoot" id="appRoot">
    <div class="noise"></div>

    <!-- Theme Toggle -->
    <div class="themeToggle" id="themeBtn" title="Toggle theme">
      <svg id="themeIcon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color:var(--text-sub)">
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
      </svg>
    </div>

    <div class="layoutWrapper">

      <!-- ===== MASTER PANEL ===== -->
      <div class="glassCard masterPanel" id="masterPanel">

        <div class="panelHeader">
          <div class="panelLabel">Quartz Enterprise</div>
          <div class="panelTitle">Browse Orders</div>
          <div class="panelSub">5 contracts Â· Last sync 2 min ago</div>
        </div>

        <div class="searchWrap">
          <input class="searchInput" id="searchInput" type="text" placeholder="ðŸ”  Search by customer or IDâ€¦"
            style="width:100%;background:var(--surface2);border:1px solid var(--border);border-radius:var(--radius-md);
            padding:10px 14px;font-size:13px;color:var(--text);outline:none;font-family:'DM Sans',sans-serif;
            transition:border-color 0.3s,box-shadow 0.3s;"/>
        </div>

        <div class="scrollContent" id="orderList">
          <!-- populated by JS -->
        </div>

      </div>

      <!-- ===== DETAIL PANEL ===== -->
      <div class="glassCard detailPanel" id="detailPanel" style="display:none;flex-direction:column;">
        <div id="detailContent" style="display:flex;flex-direction:column;height:100%;"></div>
      </div>

    </div><!-- layoutWrapper -->
  </div><!-- appRoot -->
</div><!-- appWrapper -->

<script>
(function(){

/* ===== DATA ===== */
var orders = [
  { id:"1001", customer:"Apple GmbH",    rev:"120,000", users:412, status:"Active",    change:"+12.4%", up:true  },
  { id:"1002", customer:"SAP SE",        rev:"85,500",  users:208, status:"Pending",   change:"-2.1%",  up:false },
  { id:"1003", customer:"Cloud Corp",    rev:"42,000",  users:97,  status:"Completed", change:"+4.8%",  up:true  },
  { id:"1004", customer:"Microsoft",     rev:"210,000", users:1204,status:"Active",    change:"+31.2%", up:true  },
  { id:"1005", customer:"Tesla Inc.",    rev:"90,200",  users:340, status:"Pending",   change:"-0.7%",  up:false }
];

var resources = {
  "1001": [
    { name:"Compute Nodes Gen 4",  spec:"x86-64 Â· 4.2GHz",  alloc:"128 Cores",   status:"success", label:"Deployed"  },
    { name:"Object Storage",       spec:"NVMe Â· Tier 1",     alloc:"50 TB",        status:"warning", label:"Syncing"   },
    { name:"Load Balancer",        spec:"Global Anycast",    alloc:"10 Gbps",      status:"success", label:"Active"    }
  ],
  "1002": [
    { name:"Edge Functions",       spec:"V8 Isolates",       alloc:"2M req/day",   status:"warning", label:"Queued"    },
    { name:"Managed DB",           spec:"PostgreSQL 15",     alloc:"2Ã— 16 vCPU",  status:"success", label:"Running"   }
  ],
  "1003": [
    { name:"Batch Compute",        spec:"Spot Instances",    alloc:"64 Cores",     status:"success", label:"Done"      },
    { name:"Cold Storage",         spec:"S3-compatible",     alloc:"200 TB",       status:"success", label:"Archived"  },
    { name:"CDN",                  spec:"POP Ã— 42",          alloc:"Global",       status:"success", label:"Active"    }
  ],
  "1004": [
    { name:"AI Inference Cluster", spec:"H100 Ã— 16",        alloc:"640 GB HBM",  status:"success", label:"Running"   },
    { name:"Networking Fabric",    spec:"400GbE InfiniBand", alloc:"4Ã— spine",     status:"success", label:"Active"    },
    { name:"Object Storage",       spec:"NVMe Â· Tier 0",    alloc:"2 PB",         status:"warning", label:"Syncing"   }
  ],
  "1005": [
    { name:"Compute Nodes Gen 3",  spec:"ARM Â· 3.5GHz",     alloc:"32 Cores",    status:"error",   label:"Degraded"  },
    { name:"Monitoring Stack",     spec:"Prometheus + Loki", alloc:"Infra plan",  status:"success", label:"Active"    }
  ]
};

/* ===== AVATARS ===== */
var avatarColors = [
  ["#6C63FF","#8B84FF"],
  ["#FF6B9D","#FF8FB8"],
  ["#00D9B8","#00B8A0"],
  ["#FFB547","#FF8F00"],
  ["#5B8DEF","#3D6FD4"]
];
function getInitials(name){ return name.split(/\s+/).map(function(w){return w[0];}).join("").slice(0,2).toUpperCase(); }
function avatarStyle(idx){
  var c = avatarColors[idx % avatarColors.length];
  return "background:linear-gradient(135deg,"+c[0]+","+c[1]+");color:#fff;";
}

/* ===== BADGE ===== */
function badgeHtml(status){
  var cls = {Active:"badge-active",Pending:"badge-pending",Completed:"badge-completed"}[status]||"badge-pending";
  return '<span class="orderBadge '+cls+'">'+status+'</span>';
}

/* ===== RENDER ORDER LIST ===== */
var activeId = null;
function renderList(filter){
  var list = document.getElementById("orderList");
  list.innerHTML = "";
  var filtered = orders.filter(function(o){
    if(!filter) return true;
    return o.customer.toLowerCase().indexOf(filter.toLowerCase())>-1 || o.id.indexOf(filter)>-1;
  });
  if(filtered.length===0){
    list.innerHTML = '<div class="emptyState"><div class="emptyIcon">ðŸ“­</div><div class="emptyTitle">No results</div><div class="emptyText">Try a different name or order ID</div></div>';
    return;
  }
  filtered.forEach(function(o, i){
    var div = document.createElement("div");
    div.className = "orderItem reveal" + (activeId===o.id ? " active" : "");
    div.setAttribute("data-id", o.id);
    div.innerHTML =
      '<div class="orderAvatar" style="'+avatarStyle(orders.indexOf(o))+'">'+getInitials(o.customer)+'</div>'+
      '<div class="orderInfo"><div class="orderName">'+o.customer+'</div><div class="orderId">Order #'+o.id+'</div></div>'+
      badgeHtml(o.status);
    div.addEventListener("click", function(){ selectOrder(o.id); });
    list.appendChild(div);
  });
}
renderList();

/* ===== SEARCH ===== */
document.getElementById("searchInput").addEventListener("input", function(e){
  renderList(e.target.value);
});
document.getElementById("searchInput").addEventListener("focus", function(){
  this.style.borderColor = "var(--accent)";
  this.style.boxShadow = "0 0 0 3px rgba(108,99,255,0.15)";
});
document.getElementById("searchInput").addEventListener("blur", function(){
  this.style.borderColor = "var(--border)";
  this.style.boxShadow = "none";
});

/* ===== STATUS PILL ===== */
function statusPill(s, label){
  return '<span class="statusPill status-'+s+'"><span class="dot"></span>'+label+'</span>';
}

/* ===== SELECT ORDER ===== */
function selectOrder(id){
  if(activeId === id) return;
  activeId = id;

  // Update list highlights
  document.querySelectorAll(".orderItem").forEach(function(el){
    el.classList.toggle("active", el.getAttribute("data-id")===id);
  });

  // Animate master panel
  document.getElementById("masterPanel").classList.add("splitMode");

  var o = orders.find(function(x){return x.id===id;});
  var res = resources[id] || [];
  var idx = orders.indexOf(o);

  // Build detail HTML
  var resRows = res.map(function(r){
    return '<tr class="resRow">'+
      '<td><div class="resName">'+r.name+'</div><div class="resSpec">'+r.spec+'</div></td>'+
      '<td><div class="resAlloc">'+r.alloc+'</div></td>'+
      '<td>'+statusPill(r.status, r.label)+'</td>'+
    '</tr>';
  }).join("");

  var statusColor = {Active:"var(--success)",Pending:"var(--warning)",Completed:"var(--accent)"}[o.status]||"var(--text-sub)";
  var dotStyle = "width:8px;height:8px;border-radius:50%;background:"+statusColor+";display:inline-block;margin-right:6px;"+(o.status==="Active"?"animation:pulse 2s infinite;":"");

  var html =
    '<div class="detailHero">'+
      '<div class="detailBack" id="backBtn">'+
        '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>'+
        'All orders'+
      '</div>'+
      '<div class="detailCustomer reveal">'+o.customer+'</div>'+
      '<div class="detailMeta reveal" style="animation-delay:0.05s">'+
        '<span>Contract #'+o.id+'</span>'+
        '<span class="dot"></span>'+
        '<span style="display:inline-flex;align-items:center"><span style="'+dotStyle+'"></span>'+o.status+'</span>'+
      '</div>'+
    '</div>'+

    '<div class="kpiGrid">'+
      '<div class="kpiCard reveal">'+
        '<div class="kpiLabel">Revenue</div>'+
        '<div class="kpiVal">â‚¬'+o.rev+'</div>'+
        '<div class="kpiChange '+(o.up?"up":"down")+'">'+o.change+' vs last period</div>'+
      '</div>'+
      '<div class="kpiCard reveal" style="animation-delay:0.05s">'+
        '<div class="kpiLabel">Active Users</div>'+
        '<div class="kpiVal">'+o.users.toLocaleString()+'</div>'+
        '<div class="kpiChange">+3 this week</div>'+
      '</div>'+
      '<div class="kpiCard reveal" style="animation-delay:0.1s">'+
        '<div class="kpiLabel">SLA</div>'+
        '<div class="kpiVal">99.97<span style="font-size:16px;font-weight:600">%</span></div>'+
        '<div class="kpiChange up">â†‘ On target</div>'+
      '</div>'+
    '</div>'+

    '<div class="scrollContent" style="padding:24px 32px;">'+
      '<div class="sectionTitle">Provisioning Resources</div>'+
      '<table class="resTable" style="border-collapse:separate;border-spacing:0 8px;">'+
        '<thead><tr>'+
          '<th>Service</th>'+
          '<th>Allocation</th>'+
          '<th>Status</th>'+
        '</tr></thead>'+
        '<tbody>'+resRows+'</tbody>'+
      '</table>'+
    '</div>'+

    '<div class="actionBar">'+
      '<button class="btnPrimary" id="deployBtn">'+
        '<svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 2 11 13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>'+
        'Commit Deployment'+
      '</button>'+
      '<button class="btnGhost">'+
        '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>'+
        'Edit contract'+
      '</button>'+
    '</div>';

  var panel = document.getElementById("detailPanel");
  var content = document.getElementById("detailContent");
  panel.style.display = "flex";
  panel.style.animation = "none";
  requestAnimationFrame(function(){
    panel.style.animation = "";
    panel.classList.remove("detailPanel");
    void panel.offsetWidth;
    panel.classList.add("detailPanel");
    content.innerHTML = html;

    // Deploy button
    document.getElementById("deployBtn").addEventListener("click", function(){
      var btn = this;
      btn.classList.add("loading");
      btn.innerHTML = '<div class="spinner"></div> Processingâ€¦';
      setTimeout(function(){
        btn.classList.remove("loading");
        btn.classList.add("done");
        btn.innerHTML = '<svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg> Deployed!';
        setTimeout(function(){
          btn.classList.remove("done");
          btn.innerHTML = '<svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 2 11 13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg> Commit Deployment';
        }, 3000);
      }, 1400);
    });

    // Back button
    document.getElementById("backBtn").addEventListener("click", function(){
      activeId = null;
      panel.style.display = "none";
      document.getElementById("masterPanel").classList.remove("splitMode");
      document.querySelectorAll(".orderItem").forEach(function(el){ el.classList.remove("active"); });
    });
  });
}

/* ===== THEME TOGGLE ===== */
var isDark = true;
document.getElementById("themeBtn").addEventListener("click", function(){
  isDark = !isDark;
  document.getElementById("appWrapper").className = isDark ? "dark" : "light";
  document.getElementById("appRoot").setAttribute("data-theme", isDark ? "dark" : "light");
  var icon = document.getElementById("themeIcon");
  if(isDark){
    icon.innerHTML = '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>';
  } else {
    icon.innerHTML = '<circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>';
  }
  // Apply CSS vars via class
  document.documentElement.style.setProperty("--bg", isDark ? "#08090d" : "#f0f2f8");
  document.documentElement.style.setProperty("--bg2", isDark ? "#0e1017" : "#e6e9f2");
  document.documentElement.style.setProperty("--surface", isDark ? "rgba(255,255,255,0.04)" : "rgba(255,255,255,0.7)");
  document.documentElement.style.setProperty("--surface2", isDark ? "rgba(255,255,255,0.07)" : "rgba(255,255,255,0.85)");
  document.documentElement.style.setProperty("--border", isDark ? "rgba(255,255,255,0.08)" : "rgba(0,0,0,0.07)");
  document.documentElement.style.setProperty("--border-bright", isDark ? "rgba(255,255,255,0.15)" : "rgba(0,0,0,0.12)");
  document.documentElement.style.setProperty("--text", isDark ? "#f0f1f5" : "#0e1017");
  document.documentElement.style.setProperty("--text-sub", isDark ? "rgba(240,241,245,0.45)" : "rgba(14,16,23,0.5)");
  document.documentElement.style.setProperty("--text-muted", isDark ? "rgba(240,241,245,0.25)" : "rgba(14,16,23,0.3)");
  document.documentElement.style.setProperty("--shadow-card", isDark ? "0 24px 80px rgba(0,0,0,0.5)" : "0 24px 80px rgba(0,0,0,0.08)");
  document.documentElement.style.setProperty("--shadow-glow", isDark ? "0 0 60px rgba(108,99,255,0.15)" : "0 0 60px rgba(108,99,255,0.08)");
  document.body.style.background = isDark ? "#08090d" : "#f0f2f8";
});

})();
</script>
</body>
</html>
